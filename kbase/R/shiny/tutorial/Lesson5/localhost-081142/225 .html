<pre>slowQuery

DATE: 29/October/2019 15:04:31 (America/Sao_Paulo)
EXTRA_CONTENT: Array
(
    [execution_time] => 5.0557169914246 seconds
    [query] => SELECT p.iddep, p.name, p.access_token_expires, p.org_name, p.org_type,
                       p.date_last_cursor, p.invalid_reason, p.all_locations,
                       p.sync_status, p.date_created, p.idaccount, 
                        (SELECT GROUP_CONCAT(u.idunit) FROM dep_unit_account u WHERE p.iddep = u.iddep) as idunits,
                        (SELECT GROUP_CONCAT(u.iduser) FROM dep_unit_account u WHERE p.iddep = u.iddep) as idusers, 
                        (SELECT GROUP_CONCAT(u.idusergroups) FROM dep_unit_account u WHERE p.iddep = u.iddep) as idusergroups
                FROM dep_accounts p LEFT JOIN dep_unit_account u ON p.iddep = u.iddep WHERE p.is_deleted = 0 AND ((p.all_locations = 0  OR u.iduser IN (1473) OR u.idusergroups IS NOT NULL)) GROUP BY p.iddep
)

REMOTE_ADDR: ::1
HTTP_HOST: localhost
HTTP_REFERER: 
HTTP_USER_AGENT: 
ARGS: 
GET: 
POST: array (
  'secretkey' => 'officesecretkey',
  'appkey' => 'aN63UDr4Ug8F6S6ABMK0ifcM78E266iQ',
  'force_mdm_type_server' => 'business',
  'MDM_DOMAIN' => 'officebiz-01',
  'operation' => 'get_dep_accounts',
  'usergroups' => 'ALL',
  'admins' => '1473',
  'iduserrequest' => '1473',
  'lang' => 'en',
  'loggedin_user_idusergroups_admin' => 'ALL',
  'current_os' => 'ios',
)
GLOBALS_DATABASE: officebiz_01
SCHOOL: 
COMPANY: 

1) Controller::__construct -> File: /Sites/web/mdm/public/services/index.php (line 72)
2) Controller::process -> File: /Sites/web/mdm/classes/Controller.php (line 49)
3) Dep::controller -> File: /Sites/web/mdm/classes/Controller.php (line 804)
4) Dep::getAccounts -> File: /Sites/web/mdm/classes/Dep.php (line 77)
5) DB::stmtExec -> File: /Sites/web/mdm/classes/Dep.php (line 416)
6) Log::errorLog -> File: /Sites/web/mdm/classes/DB.php (line 426)
7) MosyleUtils\Log::saveLocalFile -> File: /Sites/web/mdm/classes/Log.php (line 94)
8) MosyleUtils\Log::backtrace -> File: /Sites/web/utils/libs/classes/Log.php (line 64)
</pre>****************************************<br><pre>slowQuery

DATE: 29/October/2019 17:07:25 (America/Sao_Paulo)
EXTRA_CONTENT: Array
(
    [execution_time] => 6.1980819702148 seconds
    [query] => SELECT DISTINCT d.deviceudid , d.total_disk, d.is_supervised, d.device_model, d.osversion, d.battery, d.date_last_beat, IF(d.device_name IS NULL, "Device without name", device_name) as device_name, d.tags, d.available_disk, d.ios_maximum_resident_users, d.asset_tag, d.date_info, d.model_name, d.android_admin_enabled, d.android_usage_access_enabled, d.isBluetoothOn, d.iTunesStoreAccountIsActive, d.has_passcode, (d.available_disk/d.total_disk) as percent_disk, dd.iddep 
                FROM device_info d LEFT JOIN dep_devices dd ON d.serial_number = dd.serial_number AND d.os IN ("ios", "mac", "tvos") AND dd.op_type != "deleted"
                WHERE d.deviceudid IN ("337a6698cc1b472fc0adee3cbdcf19643ebd97eb","1db9a074f3b5f13bd6d407a8764a15b2b06be0fe","4194638b879cfc922f2593027677873e18de7b48","7507934ecb05ba5671a6b8513cf8fccb4b026963","0f22a17ec45dff8f89cf39b854e48ca8d7eef680")
)

REMOTE_ADDR: ::1
HTTP_HOST: localhost
HTTP_REFERER: 
HTTP_USER_AGENT: 
ARGS: 
GET: 
POST: array (
  'secretkey' => 'officesecretkey',
  'appkey' => 'aN63UDr4Ug8F6S6ABMK0ifcM78E266iQ',
  'force_mdm_type_server' => 'business',
  'MDM_DOMAIN' => 'officebiz-01',
  'operation' => 'school_devices',
  'term_by' => '1',
  'attributes' => 'is_supervised,device_model,osversion,battery,date_last_beat,device_name,tags,available_disk,ios_maximum_resident_users,asset_tag,date_info,model_name,android_admin_enabled,android_usage_access_enabled,isBluetoothOn,iTunesStoreAccountIsActive,has_passcode',
  'page' => '1',
  'current_os' => 'ios',
  'filter_devices' => '1',
  'filter_enrollment_model' => 'DEVICE_ENROLLMENT',
  'user' => '{"type":"ADMIN","iddevicegroups_admin":[]}',
  'loggedin_user_idusergroups_admin' => 'ALL',
  'iduserrequest' => '1473',
  'lang' => 'en',
)
GLOBALS_DATABASE: officebiz_01
SCHOOL: 
COMPANY: 

1) Controller::__construct -> File: /Sites/web/mdm/public/services/index.php (line 72)
2) Controller::process -> File: /Sites/web/mdm/classes/Controller.php (line 49)
3) SchoolController::controller -> File: /Sites/web/mdm/classes/Controller.php (line 539)
4) School::getDevices -> File: /Sites/web/mdm/classes/SchoolController.php (line 23)
5) School::separateInDatabases -> File: /Sites/web/mdm/classes/School.php (line 688)
6) Device::getDevicesByDatabase -> File: /Sites/web/mdm/classes/School.php (line 758)
7) DB::stmtExec -> File: /Sites/web/mdm/classes/Device.php (line 2924)
8) Log::errorLog -> File: /Sites/web/mdm/classes/DB.php (line 426)
9) MosyleUtils\Log::saveLocalFile -> File: /Sites/web/mdm/classes/Log.php (line 94)
10) MosyleUtils\Log::backtrace -> File: /Sites/web/utils/libs/classes/Log.php (line 64)
</pre>****************************************<br>
