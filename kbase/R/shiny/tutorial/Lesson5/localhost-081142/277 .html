<pre>slowQuery

DATE: 22/October/2019 09:59:56 (America/Sao_Paulo)
EXTRA_CONTENT: Array
(
    [execution_time] => 2.5907571315765 seconds
    [query] => SELECT SQL_CALC_FOUND_ROWS mah.iduser, mah.deviceudid, mah.trackid, mah.idvpp, mah.type, mah.date_created, mah.date_solved, mah.os, mah.details
                    , count(*) as count
                FROM mdmcache_alerts_history mah
                LEFT JOIN vpp_assets va ON va.itunesid = mah.trackid AND va.idvpp = mah.idvpp 
                WHERE mah.os IN ("ios","0") AND mah.date_solved IS NULL AND (mah.deviceudid IN ("02ebe9738c7a9c6a95f6dc44409fc4d2d7e5c9c3","53359d8f6878a68eed6b0ca6f3504d49ce8ed676","74d61503e25858dba69bf56a89eb5d59f7d01b23","7671fdbdd8487154df124b59dbfb5b206ff32e49","84086c2dd50f9a269a21f4126393a6aaa680e499","bc38a47fcc3140696c16b5eea6057a9f8d796c03","UE-967ECE5C-8C2F-42A7-8101-4F1B13687B97","564DA1DD-D6CD-20C1-E2E4-DD80A64CA62A","564DA967-DCCF-6A0E-D463-C2E33AD200B8","564DB0F9-DC88-841F-B3EA-C3A4D40333A2","564DCBE6-ECC0-AB25-DD8F-FEE69F45A2D5","564DE848-5289-F5CE-9BE1-3A5303AEAB15","993930C6-C53C-5E10-8F3C-738DAFF9D934","C4578F1E-1641-5FA8-8B58-31CB86E326E2","3d829e24a905fb318d64dc516b7961e539f2153c","4eec73f1ba7084845a7bb452e006ceb68ffb3942","64698303f5d0242dd04fa1a370f8b5b03fa5b350","c6e4e538999ffdd359931f9e0da630f2f481e152","d5e0f0dc0ae8404d1d090010594df4ee93a3a5a7","f4cead01a092aac8e17773f124d05401b78dba24","7507934ecb05ba5671a6b8513cf8fccb4b026963","FE0D2D39-D601-50EA-B454-A2DBA73325F9","291090AE-510E-5CE8-9DD3-42C947624500","AA8E6A06-E5E4-5F85-B174-8CAA05C75950","566B24A5-7ABE-5415-8579-85ABEB8852D7","c2ae1c15831d4abd26b239b83b136349f231489d","26
)

REMOTE_ADDR: ::1
HTTP_HOST: localhost
HTTP_REFERER: 
HTTP_USER_AGENT: 
ARGS: 
GET: 
POST: array (
  'secretkey' => 'officesecretkey_manager',
  'appkey' => 'aN63UDr4Ug8F6S6ABMK0ifcM78E266iQ',
  'force_mdm_type_server' => 'school',
  'MDM_DOMAIN' => 'officesch-01',
  'operational_systems' => 'ios',
  'is_solved' => '0',
  'group_by_type' => '1',
  'minimal_info' => '1',
  'operation' => 'get_manager_alerts',
  'iduserrequest' => '385',
  'lang' => 'en',
  'current_os' => 'ios',
  'limbo_belongs_all_locations' => '1',
  'selection_mode' => 'SELECT_SPECIFIC',
)
GLOBALS_DATABASE: officesch_01
SCHOOL: 
COMPANY: 

1) Controller::__construct -> File: /Sites/web/mdm/public/services/index.php (line 72)
2) Controller::process -> File: /Sites/web/mdm/classes/Controller.php (line 49)
3) SchoolController::controller -> File: /Sites/web/mdm/classes/Controller.php (line 555)
4) SchoolAlerts::getMDMAlerts -> File: /Sites/web/mdm/classes/SchoolController.php (line 452)
5) DB::stmtExec -> File: /Sites/web/mdm/classes/SchoolAlerts.php (line 476)
6) Log::errorLog -> File: /Sites/web/mdm/classes/DB.php (line 425)
7) MosyleUtils\Log::saveLocalFile -> File: /Sites/web/mdm/classes/Log.php (line 94)
8) MosyleUtils\Log::backtrace -> File: /Sites/web/utils/libs/classes/Log.php (line 64)
</pre>****************************************<br><pre>slowQuery

DATE: 22/October/2019 11:39:00 (America/Sao_Paulo)
EXTRA_CONTENT: Array
(
    [execution_time] => 3.8357419967651 seconds
    [query] => SELECT DISTINCT d.deviceudid , d.total_disk, d.is_supervised, d.device_model, d.osversion, d.battery, d.date_last_beat, IF(d.device_name IS NULL, "Device without name", device_name) as device_name, d.tags, d.available_disk, d.ios_maximum_resident_users, d.asset_tag, d.date_info, d.model_name, d.android_admin_enabled, d.android_usage_access_enabled, d.isBluetoothOn, d.iTunesStoreAccountIsActive, d.lostmode_status, d.has_passcode, (d.available_disk/d.total_disk) as percent_disk, dd.iddep 
                FROM device_info d LEFT JOIN dep_devices dd ON d.serial_number = dd.serial_number AND d.os IN ("ios", "mac", "tvos") AND dd.op_type != "deleted"
                WHERE d.deviceudid IN ("7507934ecb05ba5671a6b8513cf8fccb4b026963","84086c2dd50f9a269a21f4126393a6aaa680e499","7671fdbdd8487154df124b59dbfb5b206ff32e49","bc38a47fcc3140696c16b5eea6057a9f8d796c03","53359d8f6878a68eed6b0ca6f3504d49ce8ed676","7b373a787c8f6d3e917bb08cd0a3e9061f709db8","02ebe9738c7a9c6a95f6dc44409fc4d2d7e5c9c3","8b57c03a2fb75d31f58fbd9c9c09039dd1c332b2","c2ae1c15831d4abd26b239b83b136349f231489d")
)

REMOTE_ADDR: ::1
HTTP_HOST: localhost
HTTP_REFERER: 
HTTP_USER_AGENT: 
ARGS: 
GET: 
POST: array (
  'secretkey' => 'officesecretkey_manager',
  'appkey' => 'aN63UDr4Ug8F6S6ABMK0ifcM78E266iQ',
  'force_mdm_type_server' => 'school',
  'MDM_DOMAIN' => 'officesch-01',
  'operation' => 'school_devices',
  'term_by' => '1',
  'attributes' => 'is_supervised,device_model,osversion,battery,date_last_beat,device_name,tags,available_disk,ios_maximum_resident_users,asset_tag,date_info,model_name,android_admin_enabled,android_usage_access_enabled,isBluetoothOn,iTunesStoreAccountIsActive,lostmode_status,has_passcode',
  'page' => '1',
  'current_os' => 'ios',
  'filter_devices' => '1',
  'filter_enrollment_model' => 'DEVICE_ENROLLMENT',
  'iduserrequest' => '385',
  'lang' => 'en',
  'limbo_belongs_all_locations' => '1',
  'selection_mode' => 'SELECT_SPECIFIC',
)
GLOBALS_DATABASE: officesch_01
SCHOOL: 
COMPANY: 

1) Controller::__construct -> File: /Sites/web/mdm/public/services/index.php (line 72)
2) Controller::process -> File: /Sites/web/mdm/classes/Controller.php (line 49)
3) SchoolController::controller -> File: /Sites/web/mdm/classes/Controller.php (line 555)
4) School::getDevices -> File: /Sites/web/mdm/classes/SchoolController.php (line 23)
5) School::separateInDatabases -> File: /Sites/web/mdm/classes/School.php (line 683)
6) Device::getDevicesByDatabase -> File: /Sites/web/mdm/classes/School.php (line 752)
7) DB::stmtExec -> File: /Sites/web/mdm/classes/Device.php (line 2895)
8) Log::errorLog -> File: /Sites/web/mdm/classes/DB.php (line 425)
9) MosyleUtils\Log::saveLocalFile -> File: /Sites/web/mdm/classes/Log.php (line 94)
10) MosyleUtils\Log::backtrace -> File: /Sites/web/utils/libs/classes/Log.php (line 64)
</pre>****************************************<br><pre>slowQuery

DATE: 22/October/2019 15:05:03 (America/Sao_Paulo)
EXTRA_CONTENT: Array
(
    [execution_time] => 4.1784100532532 seconds
    [query] => SELECT DISTINCT d.deviceudid , d.total_disk, d.is_supervised, d.device_model, d.osversion, d.battery, d.date_last_beat, IF(d.device_name IS NULL, "Device without name", device_name) as device_name, d.tags, d.available_disk, d.ios_maximum_resident_users, d.asset_tag, d.date_info, d.model_name, d.android_admin_enabled, d.android_usage_access_enabled, d.isBluetoothOn, d.iTunesStoreAccountIsActive, d.has_passcode, (d.available_disk/d.total_disk) as percent_disk, dd.iddep 
                FROM device_info d LEFT JOIN dep_devices dd ON d.serial_number = dd.serial_number AND d.os IN ("ios", "mac", "tvos") AND dd.op_type != "deleted"
                WHERE d.deviceudid IN ("74d61503e25858dba69bf56a89eb5d59f7d01b23","4194638b879cfc922f2593027677873e18de7b48","337a6698cc1b472fc0adee3cbdcf19643ebd97eb","1db9a074f3b5f13bd6d407a8764a15b2b06be0fe","0f22a17ec45dff8f89cf39b854e48ca8d7eef680","7507934ecb05ba5671a6b8513cf8fccb4b026963")
)

REMOTE_ADDR: ::1
HTTP_HOST: localhost
HTTP_REFERER: 
HTTP_USER_AGENT: 
ARGS: 
GET: 
POST: array (
  'secretkey' => 'officesecretkey',
  'appkey' => 'aN63UDr4Ug8F6S6ABMK0ifcM78E266iQ',
  'force_mdm_type_server' => 'business',
  'MDM_DOMAIN' => 'officebiz-01',
  'operation' => 'school_devices',
  'term_by' => '1',
  'attributes' => 'is_supervised,device_model,osversion,battery,date_last_beat,device_name,tags,available_disk,ios_maximum_resident_users,asset_tag,date_info,model_name,android_admin_enabled,android_usage_access_enabled,isBluetoothOn,iTunesStoreAccountIsActive,has_passcode',
  'page' => '1',
  'current_os' => 'ios',
  'filter_devices' => '1',
  'filter_enrollment_model' => 'DEVICE_ENROLLMENT',
  'user' => '{"type":"ADMIN","iddevicegroups_admin":[]}',
  'loggedin_user_idusergroups_admin' => 'ALL',
  'iduserrequest' => '1473',
  'lang' => 'en',
)
GLOBALS_DATABASE: officebiz_01
SCHOOL: 
COMPANY: 

1) Controller::__construct -> File: /Sites/web/mdm/public/services/index.php (line 72)
2) Controller::process -> File: /Sites/web/mdm/classes/Controller.php (line 49)
3) SchoolController::controller -> File: /Sites/web/mdm/classes/Controller.php (line 555)
4) School::getDevices -> File: /Sites/web/mdm/classes/SchoolController.php (line 23)
5) School::separateInDatabases -> File: /Sites/web/mdm/classes/School.php (line 683)
6) Device::getDevicesByDatabase -> File: /Sites/web/mdm/classes/School.php (line 752)
7) DB::stmtExec -> File: /Sites/web/mdm/classes/Device.php (line 2895)
8) Log::errorLog -> File: /Sites/web/mdm/classes/DB.php (line 425)
9) MosyleUtils\Log::saveLocalFile -> File: /Sites/web/mdm/classes/Log.php (line 94)
10) MosyleUtils\Log::backtrace -> File: /Sites/web/utils/libs/classes/Log.php (line 64)
</pre>****************************************<br><pre>slowQuery

DATE: 22/October/2019 15:05:29 (America/Sao_Paulo)
EXTRA_CONTENT: Array
(
    [execution_time] => 4.5954930782318 seconds
    [query] => SELECT p.idprofile as idprofile, p.options 
                FROM generic_profiles p 
                WHERE p.is_deleted = 0 AND p.is_hidden = 0 AND p.is_enabled = 1 AND p.type = "DEVICEAUTH"
                    AND p.idprofile IN (SELECT rel.idprofile FROM generic_device_profile rel WHERE rel.to_remove = 0 AND rel.iduser IS NULL AND rel.deviceudid = :deviceudid)
                GROUP BY p.idprofile ORDER BY p.idprofile
)

REMOTE_ADDR: ::1
HTTP_HOST: localhost
HTTP_REFERER: 
HTTP_USER_AGENT: 
ARGS: 
GET: 
POST: array (
  'secretkey' => 'officesecretkey',
  'appkey' => 'aN63UDr4Ug8F6S6ABMK0ifcM78E266iQ',
  'force_mdm_type_server' => 'business',
  'MDM_DOMAIN' => 'officebiz-01',
  'operation' => 'device_info',
  'deviceudid' => '74d61503e25858dba69bf56a89eb5d59f7d01b23',
  'options' => '{"security":1}',
  'iduserrequest' => '1473',
  'lang' => 'en',
  'loggedin_user_idusergroups_admin' => 'ALL',
  'current_os' => 'ios',
)
GLOBALS_DATABASE: officebiz_01
SCHOOL: 
COMPANY: 

1) Controller::__construct -> File: /Sites/web/mdm/public/services/index.php (line 72)
2) Controller::process -> File: /Sites/web/mdm/classes/Controller.php (line 49)
3) Device::controller -> File: /Sites/web/mdm/classes/Controller.php (line 615)
4) Device::getDevice -> File: /Sites/web/mdm/classes/Device.php (line 323)
5) DeviceAuthentication::setDeviceInfo -> File: /Sites/web/mdm/classes/Device.php (line 792)
6) DeviceAuthentication::getProfilesByDeviceudid -> File: /Sites/web/mdm/classes/profiles/DeviceAuthentication.php (line 139)
7) DB::stmtExec -> File: /Sites/web/mdm/classes/profiles/DeviceAuthentication.php (line 181)
8) Log::errorLog -> File: /Sites/web/mdm/classes/DB.php (line 425)
9) MosyleUtils\Log::saveLocalFile -> File: /Sites/web/mdm/classes/Log.php (line 94)
10) MosyleUtils\Log::backtrace -> File: /Sites/web/utils/libs/classes/Log.php (line 64)
</pre>****************************************<br><pre>slowQuery

DATE: 22/October/2019 15:07:26 (America/Sao_Paulo)
EXTRA_CONTENT: Array
(
    [execution_time] => 2.5739200115204 seconds
    [query] => SELECT p.idprofile, p.name, p.allow_modification, p.is_enabled, p.os, p.allow_unitAdminAccess, GROUP_CONCAT(u.idunit) as idunits 
                FROM generic_profiles p LEFT JOIN generic_unit_profile u ON p.idprofile = u.idprofile WHERE p.is_deleted = 0 AND type = :type  AND p.os = :os  AND p.allow_modification = 1 AND p.is_districtlevel = 0 AND p.is_hidden = :is_hidden AND p.idprofile IN (0148,168) GROUP BY p.idprofile ORDER BY p.name
)

REMOTE_ADDR: ::1
HTTP_HOST: localhost
HTTP_REFERER: 
HTTP_USER_AGENT: 
ARGS: 
GET: 
POST: array (
  'secretkey' => 'officesecretkey',
  'appkey' => 'aN63UDr4Ug8F6S6ABMK0ifcM78E266iQ',
  'force_mdm_type_server' => 'business',
  'MDM_DOMAIN' => 'officebiz-01',
  'operation' => 'get_generic_profiles',
  'type' => 'WALLPAPER',
  'is_hidden' => '0',
  'idprofiles' => '148,168',
  'iduserrequest' => '1473',
  'lang' => 'en',
  'loggedin_user_idusergroups_admin' => 'ALL',
  'current_os' => 'ios',
)
GLOBALS_DATABASE: officebiz_01
SCHOOL: 
COMPANY: 

1) Controller::__construct -> File: /Sites/web/mdm/public/services/index.php (line 72)
2) Controller::process -> File: /Sites/web/mdm/classes/Controller.php (line 49)
3) GenericProfile::controller -> File: /Sites/web/mdm/classes/Controller.php (line 997)
4) GenericProfile::getProfiles -> File: /Sites/web/mdm/classes/profiles/GenericProfile.php (line 47)
5) DB::stmtExec -> File: /Sites/web/mdm/classes/profiles/GenericProfile.php (line 363)
6) Log::errorLog -> File: /Sites/web/mdm/classes/DB.php (line 425)
7) MosyleUtils\Log::saveLocalFile -> File: /Sites/web/mdm/classes/Log.php (line 94)
8) MosyleUtils\Log::backtrace -> File: /Sites/web/utils/libs/classes/Log.php (line 64)
</pre>****************************************<br>
