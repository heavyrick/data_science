<pre>slowQuery

DATE: 07/October/2019 09:51:10 (America/Sao_Paulo)
EXTRA_CONTENT: Array
(
    [execution_time] => 4.3114488124847 seconds
    [query] => SELECT DISTINCT d.deviceudid , d.total_disk, d.*, IF(d.device_name IS NULL, "Device without name", d.device_name) as device_name, AES_DECRYPT(d.last_ip_beat_encrypt, "M05yL3C0rp0r4t10N") as last_ip_beat, NULL as last_ip_beat_encrypt, AES_DECRYPT(d.last_lan_ip_encrypt, "M05yL3C0rp0r4t10N") as last_lan_ip, NULL as last_lan_ip_encrypt, (d.available_disk/d.total_disk) as percent_disk, dd.iddep 
                FROM device_info d LEFT JOIN dep_devices dd ON d.serial_number = dd.serial_number AND d.os IN ("ios", "mac", "tvos") AND dd.op_type != "deleted"
                WHERE d.deviceudid IN ("564D3D78-22C6-681D-90ED-7F8289643E5B","564DE848-5289-F5CE-9BE1-3A5303AEAB15","566B24A5-7ABE-5415-8579-85ABEB8852D7","AA8E6A06-E5E4-5F85-B174-8CAA05C75950")
)

REMOTE_ADDR: ::1
HTTP_HOST: localhost
HTTP_REFERER: 
HTTP_USER_AGENT: 
ARGS: 
GET: 
POST: array (
  'secretkey' => 'officesecretkey_manager',
  'appkey' => 'aN63UDr4Ug8F6S6ABMK0ifcM78E266iQ',
  'force_mdm_type_server' => 'school',
  'MDM_DOMAIN' => 'officesch-01',
  'date_start' => '',
  'date_ends' => '1570452665',
  'command_status' => 'pending',
  'operation' => 'get_pending_commands',
  'page' => '1',
  'iduserrequest' => '385',
  'lang' => 'en',
  'current_os' => 'mac',
  'limbo_belongs_all_locations' => '1',
  'selection_mode' => 'SELECT_SPECIFIC',
)
GLOBALS_DATABASE: officesch_01
SCHOOL: 
COMPANY: 

1) Controller::__construct -> File: /Sites/web/mdm/public/services/index.php (line 72)
2) Controller::process -> File: /Sites/web/mdm/classes/Controller.php (line 49)
3) Command::controller -> File: /Sites/web/mdm/classes/Controller.php (line 912)
4) BulkQueries::getDevicesInfo -> File: /Sites/web/mdm/classes/Command.php (line 131)
5) Device::getDevicesByDatabase -> File: /Sites/web/mdm/classes/BulkQueries.php (line 553)
6) DB::stmtExec -> File: /Sites/web/mdm/classes/Device.php (line 2895)
7) Log::errorLog -> File: /Sites/web/mdm/classes/DB.php (line 425)
8) MosyleUtils\Log::saveLocalFile -> File: /Sites/web/mdm/classes/Log.php (line 94)
9) MosyleUtils\Log::backtrace -> File: /Sites/web/utils/libs/classes/Log.php (line 64)
</pre>****************************************<br><pre>slowQuery

DATE: 07/October/2019 16:07:12 (America/Sao_Paulo)
EXTRA_CONTENT: Array
(
    [execution_time] => 3.8214919567108 seconds
    [query] => SELECT DISTINCT d.deviceudid , d.total_disk, d.deviceudid, d.total_disk, d.os, d.serial_number, IF(d.device_name IS NULL, "Device without name", device_name) as device_name, d.device_model, d.battery, d.osversion, d.date_info, d.carrier, d.roaming_enabled, d.isroaming, d.imei, d.meid, d.available_disk, d.wifi_mac_address, d.bluetooth_mac_address, d.is_supervised, d.date_app_info, d.date_last_beat, d.date_last_push, d.status, d.isActivationLockEnabled, d.isDeviceLocatorServiceEnabled, d.isDoNotDisturbInEffect, d.isCloudBackupEnabled, d.IsNetworkTethered, d.needosupdate, d.productkeyupdate, d.device_type, d.lostmode_status, d.is_muted, d.date_muted, d.activation_bypass, d.date_media_info, d.tags, d.is_deleted, d.iTunesStoreAccountHash, d.iTunesStoreAccountIsActive, d.date_profiles_info, d.ethernet_mac_address, d.model_name, d.LastCloudBackupDate, d.SystemIntegrityProtectionEnabled, d.BuildVersion, d.LocalHostName, d.HostName, d.OSUpdateSettings, d.ActiveManagedUsers, d.CurrentConsoleManagedUser, d.date_printers, d.AutoSetupAdminAccounts, d.appleTVid, d.asset_tag, d.ManagementStatus, d.OSUpdateStatus, d.AvailableOSUpdates, d.appleTVid, (d.available_disk/d.total_disk) as percent_disk, dd.iddep 
                FROM device_info d LEFT JOIN dep_devices dd ON d.serial_number = dd.serial_number AND d.os IN ("ios", "mac", "tvos") AND dd.op_type != "deleted"
                WHERE d.deviceudid IN ("26827D98-095E-571E-8F86-57343694F484","291090AE-510E-5CE8-9DD3-42C947624500","564D3D78-22
)

REMOTE_ADDR: ::1
HTTP_HOST: localhost
HTTP_REFERER: 
HTTP_USER_AGENT: 
ARGS: 
GET: 
POST: array (
  'secretkey' => 'officesecretkey_manager',
  'appkey' => 'aN63UDr4Ug8F6S6ABMK0ifcM78E266iQ',
  'force_mdm_type_server' => 'school',
  'MDM_DOMAIN' => 'officesch-01',
  'operation' => 'school_devices',
  'page_size' => '100',
  'attributes' => 'deviceudid,total_disk,os,serial_number,device_name,device_model,battery,osversion,date_info,carrier,roaming_enabled,isroaming,imei,meid,available_disk,wifi_mac_address,bluetooth_mac_address,is_supervised,date_app_info,date_last_beat,date_last_push,status,isActivationLockEnabled,isDeviceLocatorServiceEnabled,isDoNotDisturbInEffect,isCloudBackupEnabled,IsNetworkTethered,needosupdate,productkeyupdate,device_type,lostmode_status,is_muted,date_muted,activation_bypass,date_media_info,tags,is_deleted,iTunesStoreAccountHash,iTunesStoreAccountIsActive,date_profiles_info,ethernet_mac_address,model_name,LastCloudBackupDate,SystemIntegrityProtectionEnabled,BuildVersion,LocalHostName,HostName,OSUpdateSettings,ActiveManagedUsers,CurrentConsoleManagedUser,date_printers,AutoSetupAdminAccounts,appleTVid,asset_tag,ManagementStatus,OSUpdateStatus,AvailableOSUpdates,appleTVid',
  'page' => '1',
  'current_os' => 'mac',
  'orderby' => 'deviceudid',
  'orderdirection' => 'asc',
  'iduserrequest' => '',
  'lang' => 'en',
  'limbo_belongs_all_locations' => '1',
  'selection_mode' => 'SELECT_SPECIFIC',
)
GLOBALS_DATABASE: officesch_01
SCHOOL: 
COMPANY: 

1) Controller::__construct -> File: /Sites/web/mdm/public/services/index.php (line 72)
2) Controller::process -> File: /Sites/web/mdm/classes/Controller.php (line 49)
3) SchoolController::controller -> File: /Sites/web/mdm/classes/Controller.php (line 555)
4) School::getDevices -> File: /Sites/web/mdm/classes/SchoolController.php (line 23)
5) School::separateInDatabases -> File: /Sites/web/mdm/classes/School.php (line 683)
6) Device::getDevicesByDatabase -> File: /Sites/web/mdm/classes/School.php (line 752)
7) DB::stmtExec -> File: /Sites/web/mdm/classes/Device.php (line 2895)
8) Log::errorLog -> File: /Sites/web/mdm/classes/DB.php (line 425)
9) MosyleUtils\Log::saveLocalFile -> File: /Sites/web/mdm/classes/Log.php (line 94)
10) MosyleUtils\Log::backtrace -> File: /Sites/web/utils/libs/classes/Log.php (line 64)
</pre>****************************************<br><pre>SELECT SQL_CALC_FOUND_ROWS
                       
                       m.pk_materia, m.nome, m.nome_sala, m.mdm_platform, m.pk_unidade, m.data_criacao, m.teachers_alias, 
                       m.data_modificacao, m.pk_usuario, m.pk_materia_tag,
                       m.is_appleid_required, m.excluido, m.unique_identifier, m.idaccount, m.registered_from,
                       u.nome as unit_name, IFNULL(mt.nome, "Classes without course") as course_name, 
                       us.nome as teacher_name, us.photo_url, 
                       u.allow_screenobservation, u.allow_teacherforceclassroom, 
                       (SELECT GROUP_CONCAT(rum.pk_usuario) FROM rel_usuario_materia rum INNER JOIN usuarios u ON rum.rel_deleted = 0 AND u.pk_usuario = rum.pk_usuario AND u.excluido = "N" WHERE rum.pk_materia = m.pk_materia) as idstudents,
                       (SELECT GROUP_CONCAT(c.pk_usuario) FROM coordenadores c INNER JOIN usuarios u ON u.pk_usuario = c.pk_usuario AND u.excluido = "N" WHERE c.pk_materia = m.pk_materia  AND (c.date_expiration IS NULL OR c.date_expiration > UNIX_TIMESTAMP())) as idcoordinators
                       

                FROM materias m
                INNER JOIN unidades u ON u.pk_unidade = m.pk_unidade
                LEFT JOIN materias_tags mt ON mt.pk_materia_tag = m.pk_materia_tag
                INNER JOIN usuarios us ON us.pk_usuario = m.pk_usuario
                WHERE m.excluido = "N"
                GROUP BY m.pk_materia
                
                ORDER BY mt.nome, m.nome
                LIMIT 250
                OFFSET 0

DATE: 07/October/2019 17:41:24 (America/Sao_Paulo)
EXTRA_CONTENT: Array
(
    [execution_time] => 3.586639881134 seconds
)

REMOTE_ADDR: ::1
HTTP_HOST: localhost
HTTP_REFERER: http://localhost/web/manager/public/
HTTP_USER_AGENT: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/77.0.3865.90 Safari/537.36
ARGS: 
GET: 
POST: array (
  'usertab_current_os' => 'mac',
  'usertab_current_idschool' => 'officeschool',
  'page_index' => '0',
  'filterby_name' => '',
  'onoffswitch' => 'on',
)
GLOBALS_DATABASE: 
SCHOOL: 
COMPANY: 

1) ClassPeriod::getClassPeriodsGroupByCourses -> File: /Sites/web/manager/public/screens/scules/classmanager/periods_list_items.php (line 43)
2) ClassPeriod::getClassPeriods -> File: /Sites/web/manager/classes/ClassPeriod.php (line 488)
3) DB::stmtExec -> File: /Sites/web/manager/classes/ClassPeriod.php (line 411)
4) log::dolog -> File: /Sites/web/manager/classes/DB.php (line 283)
5) MosyleUtils\Log::saveLocalFile -> File: /Sites/web/manager/classes/log.php (line 22)
6) MosyleUtils\Log::backtrace -> File: /Sites/web/utils/libs/classes/Log.php (line 64)
</pre>****************************************<br>
