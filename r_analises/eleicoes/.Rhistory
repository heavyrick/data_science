options = layersControlOptions(collapsed = FALSE)
)
}
mapa_votos_2()
mapa_votos_2 <- function() {
lf <- leaflet() %>%
addProviderTiles(providers$CartoDB.Positron)
purrr::walk(
names(df6),
function(Sigla) {
lf <<- lf %>%
#addHeatmap(lng = ~lng, lat = ~lat, group =df6$Sigla, intensity = ~Votos, blur = 20, max = 0.05, radius = 15)
addHeatmap(
data = df6[[sigla]],
layerId = Sigla, group = Sigla,
lng=~lng, lat=~lat, intensity = ~Votos,
blur = 20, max = 0.05, radius = 15)
})
lf %>%
addLayersControl(
baseGroups = names(df6),
options = layersControlOptions(collapsed = FALSE)
)
}
mapa_votos_2()
mapa_votos_2 <- function() {
lf <- leaflet() %>%
addProviderTiles(providers$CartoDB.Positron)
purrr::walk(
names(df6),
function(Sigla) {
lf <<- lf %>%
#addHeatmap(lng = ~lng, lat = ~lat, group =df6$Sigla, intensity = ~Votos, blur = 20, max = 0.05, radius = 15)
addHeatmap(
data = df6[[sigla]],
#layerId = Sigla, group = Sigla,
lng=~lng, lat=~lat, intensity = ~Votos,
blur = 20, max = 0.05, radius = 15)
})
lf %>%
addLayersControl(
baseGroups = names(df6),
options = layersControlOptions(collapsed = FALSE)
)
}
mapa_votos_2()
mapa_votos_2 <- function() {
lf <- leaflet() %>%
addProviderTiles(providers$CartoDB.Positron)
purrr::walk(
names(df6),
function(df) {
lf <<- lf %>%
#addHeatmap(lng = ~lng, lat = ~lat, group =df6$Sigla, intensity = ~Votos, blur = 20, max = 0.05, radius = 15)
addHeatmap(
data = df6[[sigla]],
#layerId = Sigla, group = Sigla,
lng=~lng, lat=~lat, intensity = ~Votos,
blur = 20, max = 0.05, radius = 15)
})
lf %>%
addLayersControl(
baseGroups = names(df6),
options = layersControlOptions(collapsed = FALSE)
)
}
mapa_votos_2()
mapa_votos_2 <- function() {
lf <- leaflet() %>%
addProviderTiles(providers$CartoDB.Positron)
purrr::walk(
names(df6),
function(df) {
lf <<- lf %>%
#addHeatmap(lng = ~lng, lat = ~lat, group =df6$Sigla, intensity = ~Votos, blur = 20, max = 0.05, radius = 15)
addHeatmap(
data = df$Sigla,
#layerId = Sigla, group = Sigla,
lng=~lng, lat=~lat, intensity = ~Votos,
blur = 20, max = 0.05, radius = 15)
})
lf %>%
addLayersControl(
baseGroups = names(df6),
options = layersControlOptions(collapsed = FALSE)
)
}
mapa_votos_2()
mapa_votos_2 <- function() {
lf <- leaflet() %>%
addProviderTiles(providers$CartoDB.Positron)
purrr::walk(
names(df6),
function(df) {
lf <<- lf %>%
#addHeatmap(lng = ~lng, lat = ~lat, group =df6$Sigla, intensity = ~Votos, blur = 20, max = 0.05, radius = 15)
addHeatmap(
data = df.Sigla,
#layerId = Sigla, group = Sigla,
lng=~lng, lat=~lat, intensity = ~Votos,
blur = 20, max = 0.05, radius = 15)
})
lf %>%
addLayersControl(
baseGroups = names(df6),
options = layersControlOptions(collapsed = FALSE)
)
}
mapa_votos_2()
mapa_votos_2 <- function() {
lf <- leaflet() %>%
addProviderTiles(providers$CartoDB.Positron)
purrr::walk(
names(df6),
function(df) {
print(df)
lf <<- lf %>%
#addHeatmap(lng = ~lng, lat = ~lat, group =df6$Sigla, intensity = ~Votos, blur = 20, max = 0.05, radius = 15)
addHeatmap(
data = df.Sigla,
#layerId = Sigla, group = Sigla,
lng=~lng, lat=~lat, intensity = ~Votos,
blur = 20, max = 0.05, radius = 15)
})
lf %>%
addLayersControl(
baseGroups = names(df6),
options = layersControlOptions(collapsed = FALSE)
)
}
mapa_votos_2()
mapa_votos_2 <- function() {
lf <- leaflet() %>%
addProviderTiles(providers$CartoDB.Positron)
purrr::walk(
names(df6),
function(df) {
print(df[[Sigla]])
lf <<- lf %>%
#addHeatmap(lng = ~lng, lat = ~lat, group =df6$Sigla, intensity = ~Votos, blur = 20, max = 0.05, radius = 15)
addHeatmap(
data = df.Sigla,
#layerId = Sigla, group = Sigla,
lng=~lng, lat=~lat, intensity = ~Votos,
blur = 20, max = 0.05, radius = 15)
})
lf %>%
addLayersControl(
baseGroups = names(df6),
options = layersControlOptions(collapsed = FALSE)
)
}
mapa_votos_2()
mapa_votos_2 <- function() {
lf <- leaflet() %>%
addProviderTiles(providers$CartoDB.Positron)
purrr::walk(
names(df6),
function(df6) {
print(df6)
lf <<- lf %>%
#addHeatmap(lng = ~lng, lat = ~lat, group =df6$Sigla, intensity = ~Votos, blur = 20, max = 0.05, radius = 15)
addHeatmap(
data = df.Sigla,
#layerId = Sigla, group = Sigla,
lng=~lng, lat=~lat, intensity = ~Votos,
blur = 20, max = 0.05, radius = 15)
})
lf %>%
addLayersControl(
baseGroups = names(df6),
options = layersControlOptions(collapsed = FALSE)
)
}
mapa_votos_2()
purrr::walk(
function(df6) {
print(df6)
}
)
purrr::walk(
function(df6) {
print(df)
}
)
purrr::walk(
names(df6),
function(Sigla) {
print(Sigla)
}
)
purrr::walk(
names(df6),
function(df) {
print(df[[Sigla]])
}
)
purrr::walk(
names(df6),
function(df) {
print(df)
}
)
purrr::walk(
names(df6),
function(df) {
print(df[Sigla])
}
)
purrr::walk(
names(df6),
function(df) {
print(df['Sigla'])
}
)
purrr::walk(
names(df6),
function(df) {
print(df$Sigla)
}
)
purrr::walk(
names(df6),
function(df) {
print(df[[df]])
}
)
purrr::walk(
names(df6),
function(df) {
print(df[df])
}
)
mapa_votos_2 <- function() {
lf <- leaflet() %>%
addProviderTiles(providers$CartoDB.Positron)
purrr::walk(
names(df6),
function(df) {
print(df)
lf <<- lf %>%
#addHeatmap(lng = ~lng, lat = ~lat, group =df6$Sigla, intensity = ~Votos, blur = 20, max = 0.05, radius = 15)
addHeatmap(
data = df[Sigla],
#layerId = Sigla, group = Sigla,
lng=~lng, lat=~lat, intensity = ~Votos,
blur = 20, max = 0.05, radius = 15)
})
lf %>%
addLayersControl(
baseGroups = names(df6),
options = layersControlOptions(collapsed = FALSE)
)
}
mapa_votos_2()
mapa_votos_2 <- function() {
lf <- leaflet() %>%
addProviderTiles(providers$CartoDB.Positron)
purrr::walk(
names(df6),
function(df) {
print(df)
lf <<- lf %>%
#addHeatmap(lng = ~lng, lat = ~lat, group =df6$Sigla, intensity = ~Votos, blur = 20, max = 0.05, radius = 15)
addHeatmap(
data = df[df],
#layerId = Sigla, group = Sigla,
lng=~lng, lat=~lat, intensity = ~Votos,
blur = 20, max = 0.05, radius = 15)
})
lf %>%
addLayersControl(
baseGroups = names(df6),
options = layersControlOptions(collapsed = FALSE)
)
}
mapa_votos_2()
mapa_votos_2 <- function() {
lf <- leaflet() %>%
addProviderTiles(providers$CartoDB.Positron)
purrr::walk(
names(df6),
function(df) {
print(df)
lf <<- lf %>%
#addHeatmap(lng = ~lng, lat = ~lat, group =df6$Sigla, intensity = ~Votos, blur = 20, max = 0.05, radius = 15)
addHeatmap(
data = df[df],
layerId = df, group = df,
lng=~lng, lat=~lat, intensity = ~Votos,
blur = 20, max = 0.05, radius = 15)
})
lf %>%
addLayersControl(
baseGroups = names(df6),
options = layersControlOptions(collapsed = FALSE)
)
}
mapa_votos_2()
mapa_votos_2 <- function() {
lf <- leaflet() %>%
addProviderTiles(providers$CartoDB.Positron)
purrr::walk(
names(df6),
function(Sigla) {
print(Sigla)
lf <<- lf %>%
#addHeatmap(lng = ~lng, lat = ~lat, group =df6$Sigla, intensity = ~Votos, blur = 20, max = 0.05, radius = 15)
addHeatmap(
data = df[df],
layerId = df, group = df,
lng=~lng, lat=~lat, intensity = ~Votos,
blur = 20, max = 0.05, radius = 15)
})
lf %>%
addLayersControl(
baseGroups = names(df6),
options = layersControlOptions(collapsed = FALSE)
)
}
mapa_votos_2()
mapa_votos_2 <- function() {
lf <- leaflet() %>%
addProviderTiles(providers$CartoDB.Positron)
purrr::walk(
names(df6),
function(Sigla) {
print(Sigla)
lf <<- lf %>%
#addHeatmap(lng = ~lng, lat = ~lat, group =df6$Sigla, intensity = ~Votos, blur = 20, max = 0.05, radius = 15)
addHeatmap(
data = df6[[Sigla]],
layerId = Sigla, group = Sigla,
lng=~lng, lat=~lat, intensity = ~Votos,
blur = 20, max = 0.05, radius = 15)
})
lf %>%
addLayersControl(
baseGroups = names(df6),
options = layersControlOptions(collapsed = FALSE)
)
}
mapa_votos_2()
mapa_votos_2 <- function() {
lf <- leaflet(df6) %>%
addProviderTiles(providers$CartoDB.Positron)
purrr::walk(
names(df6),
function(Sigla) {
print(Sigla)
lf <<- lf %>%
#addHeatmap(lng = ~lng, lat = ~lat, group =df6$Sigla, intensity = ~Votos, blur = 20, max = 0.05, radius = 15)
addHeatmap(
data = df6[[Sigla]],
layerId = Sigla, group = Sigla,
lng=~lng, lat=~lat, intensity = ~Votos,
blur = 20, max = 0.05, radius = 15)
})
lf %>%
addLayersControl(
baseGroups = names(df6),
options = layersControlOptions(collapsed = FALSE)
)
}
mapa_votos_2()
mapa_votos_2 <- function() {
lf <- leaflet(data = df6) %>%
addProviderTiles(providers$CartoDB.Positron)
purrr::walk(
names(df6),
function(Sigla) {
# print(Sigla)
lf <<- lf %>%
#addHeatmap(lng = ~lng, lat = ~lat, group =df6$Sigla, intensity = ~Votos, blur = 20, max = 0.05, radius = 15)
addHeatmap(
data = df6[[Sigla]],
layerId = Sigla, group = Sigla,
lng=~lng, lat=~lat, intensity = ~Votos,
blur = 20, max = 0.05, radius = 15)
})
lf %>%
addLayersControl(
baseGroups = names(df6),
options = layersControlOptions(collapsed = FALSE)
)
}
mapa_votos_2()
df6 = sqldf("
SELECT
SUM(v.QT_VOTOS) AS Votos, l.DS_LOCAL, l.NR_LATITUDE as lat, l.NR_LONGITUDE as lng, l.NM_BAIRRO, l.NM_CIDADE, v.NR_PARTIDO,
(CASE WHEN p.Sigla IS NULL THEN 'BRANCO/NULO' ELSE p.Sigla END) AS Sigla
FROM
df_secao_votacao_mun v
LEFT JOIN
df_locais_votacao l ON l.NR_ZONA = v.NR_ZONA AND l.NR_SECAO = v.NR_SECAO
LEFT JOIN
df_partidos p ON p.Legenda = v.NR_PARTIDO
GROUP BY
l.CD_LOCAL, l.NR_LATITUDE, l.NR_LONGITUDE, l.NM_BAIRRO, l.NM_CIDADE, v.NR_PARTIDO
ORDER BY
Votos DESC
")
mapa_votos_2 <- function() {
lf <- leaflet(data = df6) %>%
addProviderTiles(providers$CartoDB.Positron)
purrr::walk(
names(df6),
function(Sigla) {
# print(Sigla)
lf <<- lf %>%
#addHeatmap(lng = ~lng, lat = ~lat, group =df6$Sigla, intensity = ~Votos, blur = 20, max = 0.05, radius = 15)
addHeatmap(
data = df6[[Sigla]],
layerId = Sigla, group = Sigla,
lng=~lng, lat=~lat #, intensity = ~Votos,
blur = 20, max = 0.05, radius = 15)
})
lf %>%
addLayersControl(
baseGroups = names(df6),
options = layersControlOptions(collapsed = FALSE)
)
}
mapa_votos_2()
mapa_votos_2 <- function() {
lf <- leaflet(data = df6) %>%
addProviderTiles(providers$CartoDB.Positron)
purrr::walk(
names(df6),
function(Sigla) {
# print(Sigla)
lf <<- lf %>%
#addHeatmap(lng = ~lng, lat = ~lat, group =df6$Sigla, intensity = ~Votos, blur = 20, max = 0.05, radius = 15)
addHeatmap(
data = df6[[Sigla]],
layerId = Sigla, group = Sigla,
lng=~lng, lat=~lat, intensity = ~Votos,
blur = 20, max = 0.05, radius = 15)
})
lf %>%
addLayersControl(
baseGroups = names(df6),
options = layersControlOptions(collapsed = FALSE)
)
}
mapa_votos_2()
mapa_votos_2 <- function() {
lf <- leaflet(data = df6) %>%
addProviderTiles(providers$CartoDB.Positron)
purrr::walk(
names(df6),
function(Sigla) {
# print(Sigla)
lf <<- lf %>%
#addHeatmap(lng = ~lng, lat = ~lat, group =df6$Sigla, intensity = ~Votos, blur = 20, max = 0.05, radius = 15)
addHeatmap(
#data = df6[[Sigla]],
layerId = Sigla, group = Sigla,
lng=~lng, lat=~lat, intensity = ~Votos,
blur = 20, max = 0.05, radius = 15)
})
lf %>%
addLayersControl(
baseGroups = names(df6),
options = layersControlOptions(collapsed = FALSE)
)
}
mapa_votos_2()
mapa_votos_2 <- function() {
lf <- leaflet() %>%
addProviderTiles(providers$CartoDB.Positron)
purrr::walk(
names(df6),
function(Sigla) {
# print(Sigla)
lf <<- lf %>%
#addHeatmap(lng = ~lng, lat = ~lat, group =df6$Sigla, intensity = ~Votos, blur = 20, max = 0.05, radius = 15)
addHeatmap(
#data = df6[[Sigla]],
layerId = Sigla, group = Sigla,
lng=~lng, lat=~lat, intensity = ~Votos,
blur = 20, max = 0.05, radius = 15)
})
lf %>%
addLayersControl(
baseGroups = names(df6),
options = layersControlOptions(collapsed = FALSE)
)
}
mapa_votos_2()
mapa_votos_2 <- function() {
lf <- leaflet(data = df6) %>%
addProviderTiles(providers$CartoDB.Positron)
purrr::walk(
names(df6),
function(Sigla) {
# print(Sigla)
lf <<- lf %>%
#addHeatmap(lng = ~lng, lat = ~lat, group =df6$Sigla, intensity = ~Votos, blur = 20, max = 0.05, radius = 15)
addHeatmap(
#data = df6[[Sigla]],
layerId = Sigla, group = Sigla,
lng=~lng, lat=~lat, intensity = ~Votos,
blur = 20, max = 0.05, radius = 15)
})
lf %>%
addLayersControl(
baseGroups = names(df6),
options = layersControlOptions(collapsed = FALSE)
)
}
mapa_votos_2()
